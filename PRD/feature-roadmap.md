# Antigravity Remote Dev 功能路线图

基于现有代码分析和行业趋势，整理的优化和新增功能建议。

---

## 🔴 高优先级（体验提升）

### 1. PWA 支持 — 可安装到手机主屏

**现状**：每次需要手动输入 URL 打开浏览器  
**方案**：添加 `manifest.json` + Service Worker，支持"添加到主屏幕"

- 添加 Web App Manifest（图标、名称、主题色、启动画面）
- 注册 Service Worker 缓存静态资源，实现离线空壳页面
- 体验从"打开浏览器 → 输入地址"变为"点图标马上看"

**复杂度**：低 | **收益**：高

---

### 2. Push 通知 — AI 回复完毕推送提醒

**现状**：只能不断刷新或盯着屏幕看 AI 是否完成  
**方案**：检测 AI 输出完毕后，通过 Web Push 发送通知到手机

- 使用 `web-push` + VAPID 密钥 + Service Worker
- 服务端检测快照变化停止（连续 N 次 hash 不变 → AI 已完成）
- 推送通知如："💬 Opus 4.5 已完成回复"，点击直接跳转到对应 cascade

**复杂度**：中 | **收益**：非常高（核心痛点）

---

### 3. 深色/浅色主题自适应

**现状**：固定深色背景 `#1a1a1a`  
**方案**：跟随系统 `prefers-color-scheme` 自动切换

- 使用 CSS 变量定义主题色
- `@media (prefers-color-scheme: light)` 切换浅色方案
- 手动切换按钮（覆盖系统偏好）

**复杂度**：低 | **收益**：中

---

## 🟡 中优先级（功能增强）

### 4. 多 IDE 配置管理 — 远程连接多台机器

**现状**：只能连接本机 `127.0.0.1` 的 CDP 端口  
**方案**：支持配置多个远程主机

```json
{
  "hosts": [
    { "name": "本机", "host": "127.0.0.1", "cdpPorts": [9000, 9001] },
    { "name": "工作站", "host": "192.168.1.100", "cdpPorts": [9000] }
  ]
}
```

**复杂度**：中 | **收益**：中

---

### 5. 会话历史记录

**现状**：刷新或断开后丢失所有快照  
**方案**：本地持久化会话元数据和最后快照

- 使用 SQLite/JSON 文件存储会话标题、时间戳、最后一条消息预览
- 提供历史列表页面，支持按时间/标题搜索
- 可选：记录消息统计（发送次数、token 消耗趋势）

**复杂度**：中 | **收益**：中

---

### 6. 响应式 UI 优化 — 适配平板和桌面

**现状**：主要为手机优化，桌面大屏布局浪费  
**方案**：

- 桌面端：左侧 tab 列表 + 右侧内容区域（分栏布局）
- 平板端：可折叠侧边栏
- 移动端：保持当前底部 tab 切换

**复杂度**：中 | **收益**：中

---

### 7. 快照差异高亮

**现状**：每次刷新整体替换 HTML，用户不知道哪里变了  
**方案**：对比前后快照 DOM diff，新增内容加一个短暂的高亮动画

- 比如 AI 新输出的段落 flash 一下亮色背景
- 使用 MutationObserver 或 innerHTML diff 检测变化区域

**复杂度**：中 | **收益**：中

---

## 🟢 低优先级（锦上添花）

### 8. WebSocket 重连状态指示器

**现状**：断线后静默重连，用户不知连接状态  
**方案**：

- 顶部显示连接状态条 (🟢 Connected / 🔴 Reconnecting...)
- 断线时显示倒计时和手动重连按钮
- 重连后自动刷新当前 cascade

**复杂度**：低 | **收益**：低

---

### 9. 快捷指令 / 预设消息

**现状**：每次手动输入常用指令  
**方案**：支持自定义预设消息快捷发送

- 输入框上方显示可配置的快捷标签（如 "继续"、"帮我优化这段"、"解释一下"）
- 长按编辑/删除
- 存储在 localStorage

**复杂度**：低 | **收益**：中

---

### 10. 截图 / 分享功能

**现状**：无法方便地保存或分享 AI 对话  
**方案**：

- 长按/点击按钮截图当前 chat viewport
- 使用 `html2canvas` 生成图片
- 支持 Web Share API 直接分享

**复杂度**：低 | **收益**：低

---

### 11. API Token 用量可视化

**现状**：已有配额条，但只显示当前剩余  
**方案**：

- 记录配额历史数据，绘制用量趋势图
- 预测配额耗尽时间
- 配额低于阈值时触发 Push 通知

**复杂度**：中 | **收益**：中

---

## 优先级总结

| 优先级 | 功能 | 复杂度 | 收益 |
|--------|------|--------|------|
| 🔴 | PWA 可安装 | 低 | 高 |
| 🔴 | Push 通知（AI 完成） | 中 | 非常高 |
| 🔴 | 深色/浅色主题 | 低 | 中 |
| 🟡 | 多主机配置 | 中 | 中 |
| 🟡 | 会话历史记录 | 中 | 中 |
| 🟡 | 响应式 UI | 中 | 中 |
| 🟡 | 快照差异高亮 | 中 | 中 |
| 🟢 | 重连状态指示器 | 低 | 低 |
| 🟢 | 快捷指令预设 | 低 | 中 |
| 🟢 | 截图分享 | 低 | 低 |
| 🟢 | 配额趋势图 | 中 | 中 |
